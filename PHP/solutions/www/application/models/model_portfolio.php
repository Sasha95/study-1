<?php

class Model_Portfolio extends Model
{
	
	public function get_data($page = null)
	{	
		// connect to DB
		$connect = Connect::getInstance();
		$dbf = $connect->get();

		// // push data into DB
		// if ($dbf != null) 
		// {
		// 	$input_arr = $this->input_array();
		// 	foreach($input_arr as $el) {
		// 		// $keys = implode(',', array_keys($el));
		// 		// $values = implode(',', array_map($dbf->quote, $el));				
		// 		// $qtext = 'INSERT INTO sites ('.$keys.') VALUES('.$values.')';
		// 		// $dbf->query($qtext);
		// 		$qtext = 'INSERT INTO sites (Year, Site, Description) VALUES ('.$el['Year'].', '.$dbf->quote($el['Site']).', '.$dbf->quote($el['Description']).')';
		// 		$dbf->query($qtext);
		// 		//echo $qtext;		
		// 	}
		// }		
		
		// read data from DB
		$arr = array();
		if ($dbf != null) 
		{
			foreach($dbf->query("SELECT * from sites LIMIT $page, 10") as $row) {
				array_push($arr, $row);
				//print_r($row);
			}
		}	

		// clean the table
		// if ($dbf != null) 
		// {
		// 	$dbf->query('TRUNCATE TABLE sites');
		// }

		return $arr;			
	}

	public function get_count_of_sites()
	{
		// init count
		$count = 0;

		// connect to DB
		$connect = Connect::getInstance();
		$dbf = $connect->get();

		if ($dbf != null) 
		{
			foreach($dbf->query('SELECT count(id) AS id FROM sites') as $row) 
			{
				return $row['id'];
			}
		}
	}

	function input_array()
	{
		return array(
			
			array(
				'Year' => '2012',
				'Site' => 'http://DunkelBeer.ru',
				'Description' => 'Промо-сайт темного пива Dunkel от немецкого производителя Löwenbraü выпускаемого в России пивоваренной компанией "CАН ИнБев".'
			),

			array(
				'Year' => '2012',
				'Site' => 'http://ZopoMobile.ru',
				'Description' => 'Русскоязычный каталог китайских телефонов компании Zopo на базе Android OS и аксессуаров к ним.'
			),

			array(
				'Year' => '2012',
				'Site' => 'http://GeekWear.ru',
				'Description' => 'Интернет-магазин брендовой одежды для гиков.'
			),

			array(
				'Year' => '2011',
				'Site' => 'http://РоналВарвар.рф',
				'Description' => 'Промо-сайт мультфильма "Ронал-варвар" от норвежских режиссеров. Мультфильм о самом нетипичном варваре на Земле, переполненный интересными приключениями и забавными ситуациями.'
			),

			array(
				'Year' => '2011',
				'Site' => 'http://TompsonTatoo.ru',
				'Description' => 'Персональный сайт-блог художника-татуировщика Алексея Томпсона из Санкт-Петербурга.'
			),

			array(
				'Year' => '2011',
				'Site' => 'http://DaftState.ru',
				'Description' => 'Страничка музыкальных и сануд продюсеров из команды "DaftState", работающих в стилях BreakBeat и BigBeat.'
			),

			array(
				'Year' => '2011',
				'Site' => 'http://TiltPeople.ru',
				'Description' => 'Сайт сообщества фотографов в стиле Tilt Shif.'
			),

			array(
				'Year' => '2011',
				'Site' => 'http://AbsurdGames.ru',
				'Description' => 'Страничка российской команды разработчиков независимых игр с необычной физикой и сюрреалистической графикой.'
			),

		);
	}

	function input_array_1()
	{
		return array(
			
			array(
				'Year' => '2012',
				'Site' => 'http://DunkelBeer.ru',
				'Description' => 'Промо-сайт темного пива Dunkel от немецкого производителя Löwenbraü выпускаемого в России пивоваренной компанией "CАН ИнБев".'
			),

			array(
				'Year' => '2012',
				'Site' => 'http://ZopoMobile.ru',
				'Description' => 'Русскоязычный каталог китайских телефонов компании Zopo на базе Android OS и аксессуаров к ним.'
			),

			array(
				'Year' => '2012',
				'Site' => 'http://GeekWear.ru',
				'Description' => 'Интернет-магазин брендовой одежды для гиков.'
			),

			array(
				'Year' => '2011',
				'Site' => 'http://РоналВарвар.рф',
				'Description' => 'Промо-сайт мультфильма "Ронал-варвар" от норвежских режиссеров. Мультфильм о самом нетипичном варваре на Земле, переполненный интересными приключениями и забавными ситуациями.'
			),

			array(
				'Year' => '2011',
				'Site' => 'http://TompsonTatoo.ru',
				'Description' => 'Персональный сайт-блог художника-татуировщика Алексея Томпсона из Санкт-Петербурга.'
			),

			array(
				'Year' => '2011',
				'Site' => 'http://DaftState.ru',
				'Description' => 'Страничка музыкальных и сануд продюсеров из команды "DaftState", работающих в стилях BreakBeat и BigBeat.'
			),

			array(
				'Year' => '2011',
				'Site' => 'http://TiltPeople.ru',
				'Description' => 'Сайт сообщества фотографов в стиле Tilt Shif.'
			),

			array(
				'Year' => '2011',
				'Site' => 'http://AbsurdGames.ru',
				'Description' => 'Страничка российской команды разработчиков независимых игр с необычной физикой и сюрреалистической графикой.'
			),

		);
	}
}
